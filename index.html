<!DOCTYPE html>
<html lang="en" class="dark">

<head>
    <meta name="google-site-verification" content="GtqqG0buC54bb3Z8amYt74k_CPQSbTXAT1pk9M_pPt4" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Best Free JSON Formatter, Image Compressor & Online Developer Tools</title>

    <meta name="description"
        content="The fastest, most secure online developer toolkit. Validate & Beautify JSON, Compress Images (WebP/JPG) locally, Format SQL, and Minify CSS/JS. No server uploads.">

    <meta name="keywords"
        content="json formatter online, json validator, image compressor, reduce image size, webp converter, sql beautifier, css minifier, javascript obfuscator, code diff checker, mock data generator, base64 encoder, secure developer tools">

    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://code-formats.vercel.app/">

    <meta property="og:type" content="website">
    <meta property="og:url" content="https://code-formats.vercel.app/">
    <meta property="og:title" content="Code Formats - Secure Developer Toolkit">
    <meta property="og:description" content="Format JSON, Compress Images & Generate CSS. Fast, Free, and Private.">
    <meta property="og:image" content="https://code-formats.vercel.app/codeformat.png">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="theme-color" content="#09090b">

    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>⚡</text></svg>">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;700;800&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

    <script src="https://unpkg.com/prettier@3.0.3/standalone.js" defer></script>
    <script src="https://unpkg.com/prettier@3.0.3/plugins/babel.js" defer></script>
    <script src="https://unpkg.com/prettier@3.0.3/plugins/estree.js" defer></script>
    <script src="https://unpkg.com/prettier@3.0.3/plugins/html.js" defer></script>
    <script src="https://unpkg.com/prettier@3.0.3/plugins/postcss.js" defer></script>
    <script src="https://unpkg.com/prettier@3.0.3/plugins/yaml.js" defer></script>
    <script src="https://unpkg.com/prettier@3.0.3/plugins/typescript.js" defer></script>
    <script src="https://unpkg.com/sql-formatter@12.2.0/dist/sql-formatter.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsdiff/5.1.0/diff.min.js" defer></script>

    <style>
        :root {
            --bg-body: #09090b;
            --bg-sidebar: #121214;
            --bg-pane: #18181b;
            --bg-input: #000000;
            --bg-drawer: #121214;
            --border: #27272a;
            --primary: #6366f1;
            --primary-hover: #4f46e5;
            --primary-glow: rgba(99, 102, 241, 0.2);
            --text-main: #f4f4f5;
            --text-muted: #a1a1aa;
            --success: #10b981;
            --error: #ef4444;
            --diff-add: rgba(16, 185, 129, 0.2);
            --diff-add-text: #34d399;
            --diff-rem: rgba(239, 68, 68, 0.2);
            --diff-rem-text: #f87171;
            --font-ui: 'Inter', sans-serif;
            --font-code: 'JetBrains Mono', monospace;
            --sidebar-w: 260px;
            --header-h: 60px;
        }

        html.light {
            --bg-body: #f8fafc;
            --bg-sidebar: #ffffff;
            --bg-pane: #ffffff;
            --bg-input: #f1f5f9;
            --bg-drawer: #ffffff;
            --border: #e2e8f0;
            --primary: #4f46e5;
            --primary-glow: rgba(79, 70, 229, 0.15);
            --text-main: #0f172a;
            --text-muted: #64748b;
            --diff-add: rgba(16, 185, 129, 0.15);
            --diff-add-text: #059669;
            --diff-rem: rgba(239, 68, 68, 0.15);
            --diff-rem-text: #dc2626;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            outline: none;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            background-color: var(--bg-body);
            color: var(--text-main);
            font-family: var(--font-ui);
            height: 100vh;
            display: flex;
            overflow: hidden;
            font-size: 14px;
            transition: background 0.3s, color 0.3s;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--text-muted);
        }

        /* Sidebar & Layout */
        aside {
            width: var(--sidebar-w);
            background: var(--bg-sidebar);
            border-right: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            z-index: 50;
            flex-shrink: 0;
            transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1), transform 0.3s ease;
            white-space: nowrap;
            overflow: hidden;
        }

        aside.collapsed {
            width: 0;
            border-right: none;
        }

        .brand {
            height: var(--header-h);
            display: flex;
            align-items: center;
            padding: 0 20px;
            border-bottom: 1px solid var(--border);
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--text-main);
        }

        .brand i {
            color: var(--primary);
            margin-right: 10px;
        }

        .search-container {
            padding: 15px;
        }

        .search-input {
            width: 100%;
            background: var(--bg-input);
            border: 1px solid var(--border);
            padding: 10px 12px;
            border-radius: 6px;
            color: var(--text-main);
            font-size: 0.85rem;
            transition: border-color 0.2s;
        }

        .search-input:focus {
            border-color: var(--primary);
        }

        /* SEMANTIC NAV */
        .menu {
            flex: 1;
            overflow-y: auto;
            padding-bottom: 20px;
        }

        .nav-group-title {
            padding: 15px 20px 8px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            color: var(--text-muted);
            letter-spacing: 0.5px;
        }

        .nav-item {
            padding: 10px 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            color: var(--text-muted);
            cursor: pointer;
            border-left: 3px solid transparent;
            transition: 0.15s;
        }

        .nav-item:hover {
            background: rgba(125, 125, 125, 0.05);
            color: var(--text-main);
        }

        .nav-item.active {
            background: var(--primary-glow);
            color: var(--primary);
            border-left-color: var(--primary);
            font-weight: 500;
        }

        .nav-item i {
            width: 18px;
            text-align: center;
        }

        main {
            flex: 1;
            display: flex;
            flex-direction: column;
            min-width: 0;
            position: relative;
        }

        header {
            height: var(--header-h);
            border-bottom: 1px solid var(--border);
            background: var(--bg-sidebar);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            z-index: 40;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .menu-toggle-btn {
            cursor: pointer;
            font-size: 1.1rem;
            color: var(--text-muted);
            padding: 8px;
            border-radius: 4px;
        }

        .menu-toggle-btn:hover {
            color: var(--primary);
            background: rgba(125, 125, 125, 0.1);
        }

        .tool-info h1 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 2px;
        }

        .tool-info p {
            font-size: 0.8rem;
            color: var(--text-muted);
            display: none;
        }

        @media(min-width: 768px) {
            .tool-info p {
                display: block;
            }
        }

        .header-right {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .nav-link {
            color: var(--text-muted);
            text-decoration: none;
            font-weight: 500;
            font-size: 0.9rem;
            transition: 0.2s;
            cursor: pointer;
        }

        .nav-link:hover {
            color: var(--primary);
        }

        .theme-btn {
            background: var(--bg-pane);
            border: 1px solid var(--border);
            color: var(--text-main);
            width: 36px;
            height: 36px;
            border-radius: 6px;
            cursor: pointer;
            display: grid;
            place-items: center;
            transition: 0.2s;
        }

        .theme-btn:hover {
            border-color: var(--text-muted);
        }

        .workspace {
            flex: 1;
            padding: 15px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            overflow: hidden;
            background: var(--bg-body);
            position: relative;
        }

        .pane {
            background: var(--bg-pane);
            border: 1px solid var(--border);
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            transition: 0.3s ease;
        }

        .pane.fullscreen {
            position: fixed;
            inset: 0;
            z-index: 2000;
            border-radius: 0;
            border: none;
        }

        .pane-header {
            padding: 10px 15px;
            background: rgba(0, 0, 0, 0.02);
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .pane-title {
            font-weight: 600;
            font-size: 0.75rem;
            text-transform: uppercase;
            color: var(--text-muted);
            letter-spacing: 0.5px;
        }

        .pane-actions {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .action-icon {
            cursor: pointer;
            color: var(--text-muted);
            font-size: 0.95rem;
            transition: 0.2s;
        }

        .action-icon:hover {
            color: var(--primary);
            transform: translateY(-1px);
        }

        .editor-container {
            flex: 1;
            position: relative;
            overflow: hidden;
        }

        textarea {
            width: 100%;
            height: 100%;
            background: var(--bg-input);
            border: none;
            color: var(--text-main);
            padding: 15px;
            font-family: var(--font-code);
            font-size: 13px;
            line-height: 1.6;
            resize: none;
        }

        .editor-stats {
            position: absolute;
            bottom: 0;
            right: 0;
            background: var(--bg-sidebar);
            border-top-left-radius: 6px;
            padding: 4px 10px;
            font-size: 0.7rem;
            color: var(--text-muted);
            border-top: 1px solid var(--border);
            border-left: 1px solid var(--border);
            pointer-events: none;
        }

        #visualOutput,
        #iframePreview,
        #mockControls,
        #socialControls,
        #shadowControls,
        #imageControls,
        #imagePreview {
            position: absolute;
            inset: 0;
            background: var(--bg-input);
            display: none;
            overflow: auto;
            padding: 20px;
        }

        iframe {
            width: 100%;
            height: 100%;
            border: none;
            background: #fff;
        }

        /* SEMANTIC FOOTER */
        .footer {
            height: 60px;
            background: var(--bg-sidebar);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            border-top: 1px solid var(--border);
        }

        .footer-stats {
            display: flex;
            gap: 15px;
            font-size: 0.8rem;
            font-family: var(--font-code);
            color: var(--text-muted);
            white-space: nowrap;
        }

        .footer-actions {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 10px 24px;
            border-radius: 6px;
            font-weight: 700;
            font-size: 0.85rem;
            cursor: pointer;
            border: 1px solid transparent;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s;
            user-select: none;
            font-family: var(--font-code);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-sec {
            background: transparent;
            border-color: var(--border);
            color: var(--text-main);
        }

        .btn-sec:hover {
            border-color: var(--text-muted);
            background: rgba(125, 125, 125, 0.05);
        }

        .btn-pri {
            background: var(--primary);
            color: #fff;
            box-shadow: 0 4px 12px var(--primary-glow);
        }

        .btn-pri:hover {
            background: var(--primary-hover);
            transform: translateY(-1px);
        }

        .footer-links {
            display: flex;
            gap: 15px;
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .footer-links a {
            color: var(--text-muted);
            text-decoration: none;
            transition: 0.2s;
        }

        .footer-links a:hover {
            color: var(--primary);
        }

        #overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(2px);
            z-index: 45;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }

        #overlay.show {
            opacity: 1;
            pointer-events: auto;
        }

        @media (max-width: 900px) {
            .workspace {
                grid-template-columns: 1fr;
                grid-template-rows: 1fr 1fr;
                padding: 10px;
                gap: 10px;
            }

            aside {
                position: fixed;
                left: 0;
                top: 0;
                bottom: 0;
                transform: translateX(-100%);
                width: 280px;
                box-shadow: 5px 0 30px rgba(0, 0, 0, 0.5);
            }

            aside.open {
                transform: translateX(0);
            }

            .footer {
                padding: 15px;
                height: auto;
                flex-direction: column-reverse;
                gap: 15px;
            }

            .footer-actions {
                width: 100%;
            }

            .btn {
                flex: 1;
                justify-content: center;
                white-space: nowrap;
            }

            .footer-links {
                justify-content: center;
                width: 100%;
                padding-top: 10px;
            }

            .footer-stats {
                border-top: 1px solid rgba(255, 255, 255, 0.05);
            }

            header {
                padding: 0 15px;
            }
        }

        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: var(--bg-pane);
            border: 1px solid var(--primary);
            color: var(--text-main);
            padding: 12px 24px;
            border-radius: 50px;
            font-weight: 500;
            transform: translateY(100px);
            opacity: 0;
            transition: 0.4s;
            z-index: 2000;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        .toast.error {
            border-color: var(--error);
        }

        .toast.error i {
            color: var(--error);
        }

        /* Tools CSS */
        .json-key {
            color: #d2a8ff;
        }

        .json-string {
            color: #a5d6ff;
        }

        .json-number {
            color: #ff9f89;
        }

        .json-boolean {
            color: #569cd6;
            font-weight: bold;
        }

        .light .json-key {
            color: #a31515;
        }

        .light .json-string {
            color: #0451a5;
        }

        .diff-added {
            background-color: var(--diff-add);
            color: var(--diff-add-text);
            display: block;
            width: 100%;
        }

        .diff-removed {
            background-color: var(--diff-rem);
            color: var(--diff-rem-text);
            display: block;
            width: 100%;
        }

        pre {
            font-family: var(--font-code);
            white-space: pre-wrap;
            font-size: 13px;
        }

        .tool-group {
            padding: 15px;
            background: var(--bg-sidebar);
            border-radius: 8px;
            border: 1px solid var(--border);
            margin-bottom: 15px;
        }

        .tool-title {
            font-weight: 600;
            margin-bottom: 10px;
            font-size: 0.9rem;
            color: var(--text-main);
        }

        .tool-input {
            width: 100%;
            background: var(--bg-input);
            border: 1px solid var(--border);
            color: var(--text-main);
            padding: 8px;
            border-radius: 4px;
            font-family: var(--font-code);
            margin-bottom: 10px;
        }

        .checkbox-group {
            display: flex;
            gap: 15px;
            margin-top: 10px;
            flex-wrap: wrap;
        }

        .checkbox-group label {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.85rem;
            cursor: pointer;
        }

        .glass-slider {
            width: 100%;
            -webkit-appearance: none;
            background: var(--border);
            height: 4px;
            border-radius: 2px;
        }

        .glass-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            background: var(--primary);
            border-radius: 50%;
            cursor: pointer;
        }

        .slider-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .drop-zone {
            border: 2px dashed var(--border);
            border-radius: 8px;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: 0.3s;
            color: var(--text-muted);
            margin-bottom: 15px;
        }

        .drop-zone:hover,
        .drop-zone.dragover {
            border-color: var(--primary);
            background: var(--primary-glow);
            color: var(--primary);
        }

        .img-preview-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
            text-align: center;
        }

        .img-card {
            background: var(--bg-sidebar);
            padding: 10px;
            border-radius: 8px;
            border: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 150px;
        }

        .img-card img {
            max-width: 100%;
            max-height: 300px;
            border-radius: 4px;
            display: none;
        }

        .img-placeholder-icon {
            font-size: 3rem;
            color: var(--border);
            margin-bottom: 10px;
        }

        .img-meta {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-top: 8px;
            display: flex;
            justify-content: space-between;
            width: 100%;
        }

        .badge-save {
            background: var(--diff-add) !important;
            color: var(--diff-add-text);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: bold;
        }

        /* --- PULSE BUTTON & SEO DRAWER STYLES --- */
        #pulseBtn {
            position: fixed;
            bottom: 85px;
            right: 25px;
            width: 55px;
            height: 55px;
            background: var(--primary);
            border-radius: 50%;
            display: grid;
            place-items: center;
            color: #fff;
            font-size: 1.4rem;
            cursor: pointer;
            z-index: 1000;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
            border: none;
            transition: transform 0.2s;
            animation: pulse-glow 2s infinite;
        }

        #pulseBtn:hover {
            transform: scale(1.1);
            animation: none;
        }

        #pulseBtn::after {
            content: "About & SEO";
            position: absolute;
            right: 65px;
            top: 50%;
            transform: translateY(-50%);
            background: var(--bg-sidebar);
            color: var(--text-main);
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 0.75rem;
            white-space: nowrap;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s;
            border: 1px solid var(--border);
            font-weight: 600;
        }

        #pulseBtn:hover::after {
            opacity: 1;
        }

        @media(max-width: 900px) {
            #pulseBtn {
                bottom: 95px;
                right: 20px;
            }
        }

        @keyframes pulse-glow {
            0% {
                box-shadow: 0 0 0 0 rgba(99, 102, 241, 0.7);
            }

            70% {
                box-shadow: 0 0 0 15px rgba(99, 102, 241, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(99, 102, 241, 0);
            }
        }

        /* SEO Drawer (Semantic ASIDE) */
        #seoDrawer {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 90vh;
            background: var(--bg-drawer);
            border-top-left-radius: 20px;
            border-top-right-radius: 20px;
            box-shadow: 0 -10px 40px rgba(0, 0, 0, 0.5);
            z-index: 3000;
            transform: translateY(100%);
            transition: transform 0.4s cubic-bezier(0.19, 1, 0.22, 1);
            display: flex;
            flex-direction: column;
        }

        #seoDrawer.open {
            transform: translateY(0);
        }

        .drawer-handle-area {
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            border-bottom: 1px solid var(--border);
            position: relative;
            flex-shrink: 0;
        }

        .drawer-handle {
            width: 60px;
            height: 6px;
            background: var(--border);
            border-radius: 10px;
        }

        .drawer-close {
            position: absolute;
            right: 25px;
            top: 18px;
            font-size: 1.5rem;
            color: var(--text-muted);
            cursor: pointer;
            padding: 5px;
        }

        .drawer-close:hover {
            color: var(--text-main);
            background: rgba(125, 125, 125, 0.1);
            border-radius: 50%;
        }

        .drawer-content {
            flex: 1;
            overflow-y: auto;
            padding: 30px 20px;
            max-width: 900px;
            margin: 0 auto;
            width: 100%;
        }

        /* Rich SEO Content Styling */
        .seo-h1 {
            font-size: 2.2rem;
            color: var(--text-main);
            margin-bottom: 20px;
            font-weight: 800;
            line-height: 1.1;
            letter-spacing: -0.5px;
        }

        .seo-h1 span {
            color: var(--primary);
        }

        .seo-intro {
            font-size: 1.1rem;
            color: var(--text-muted);
            line-height: 1.7;
            margin-bottom: 30px;
        }

        .seo-h2 {
            font-size: 1.6rem;
            color: var(--text-main);
            margin: 40px 0 20px;
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .feature-box {
            background: rgba(125, 125, 125, 0.03);
            padding: 25px;
            border-radius: 16px;
            border: 1px solid var(--border);
            transition: 0.3s;
        }

        .feature-box:hover {
            border-color: var(--primary);
            background: rgba(99, 102, 241, 0.05);
        }

        .feature-box h3 {
            color: var(--text-main);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.1rem;
        }

        .feature-box i {
            color: var(--primary);
            font-size: 1.2rem;
        }

        .feature-box p {
            font-size: 0.95rem;
            color: var(--text-muted);
            line-height: 1.6;
            margin: 0;
        }

        /* Smooth FAQ Accordion */
        .faq-item {
            margin-bottom: 12px;
            border: 1px solid var(--border);
            border-radius: 10px;
            overflow: hidden;
            background: rgba(125, 125, 125, 0.02);
        }

        .faq-item[open] {
            border-color: var(--primary);
            background: rgba(99, 102, 241, 0.03);
        }

        summary {
            padding: 18px 20px;
            cursor: pointer;
            font-weight: 600;
            color: var(--text-main);
            list-style: none;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1rem;
            transition: 0.2s;
        }

        summary:hover {
            background: rgba(125, 125, 125, 0.05);
        }

        summary::-webkit-details-marker {
            display: none;
        }

        summary i {
            transition: transform 0.3s ease;
            color: var(--primary);
        }

        details[open] summary i {
            transform: rotate(180deg);
        }

        .faq-content {
            padding: 0 20px 20px;
            color: var(--text-muted);
            line-height: 1.7;
            font-size: 0.95rem;
            opacity: 0;
            transform: translateY(-10px);
            animation: fadeIn 0.3s forwards;
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .tag-cloud {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }

        .tag {
            background: var(--border);
            color: var(--text-muted);
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.75rem;
        }
    </style>
</head>

<body>
    <aside id="sidebar">
        <div class="brand">
            <div class="brand-logo"><i class="fas fa-layer-group"></i> Code Formats</div>
        </div>
        <div class="search-container"><input type="text" class="search-input" placeholder="Search tools..."
                onkeyup="filterTools(this)"></div>
        <nav class="menu" id="menuContainer"></nav>
    </aside>
    <div id="overlay" onclick="closeAllDrawers()"></div>

    <main>
        <header>
            <div class="header-left"><i class="fas fa-bars menu-toggle-btn" onclick="handleMenuClick()"></i>
                <div class="tool-info">
                    <h1 id="toolTitle">JSON Formatter</h1>
                    <p id="toolDesc">Validate, Prettify and Minify JSON data</p>
                </div>
            </div>
            <div class="header-right">
                <a href="blog.html" class="nav-link">Blog</a>
                <button class="theme-btn" onclick="toggleTheme()"><i class="fas fa-moon" id="themeIcon"></i></button>
            </div>
        </header>

        <section class="workspace" id="workspace">
            <div class="pane">
                <div class="pane-header">
                    <span class="pane-title" id="paneInputTitle">Input / Controls</span>
                    <div class="pane-actions" id="inputActions"><i class="far fa-clipboard action-icon"
                            onclick="pasteInput()" title="Paste"></i><i class="far fa-trash-alt action-icon"
                            onclick="clearAll()" title="Clear"></i></div>
                </div>
                <div class="editor-container">
                    <textarea id="input" placeholder=""></textarea>

                    <div id="mockControls">
                        <div class="tool-group">
                            <div class="tool-title">Generate Fake JSON</div>
                            <label style="font-size:0.8rem">Rows:</label><input type="number" id="mockRows"
                                class="tool-input" value="10" min="1" max="1000">
                            <div class="checkbox-group">
                                <label><input type="checkbox" id="mockId" checked> ID</label><label><input
                                        type="checkbox" id="mockName" checked> Name</label><label><input type="checkbox"
                                        id="mockEmail" checked> Email</label><label><input type="checkbox"
                                        id="mockPhone"> Phone</label><label><input type="checkbox" id="mockAvatar"
                                        checked> Avatar</label><label><input type="checkbox" id="mockRole"> Role</label>
                            </div>
                        </div>
                        <button class="btn btn-pri" onclick="generateMockData()"
                            style="width:100%; justify-content:center;">Generate JSON</button>
                    </div>

                    <div id="imageControls">
                        <div class="drop-zone" id="dropZone" onclick="document.getElementById('fileInput').click()">
                            <i class="fas fa-cloud-upload-alt" style="font-size: 2rem; margin-bottom: 10px;"></i>
                            <p>Click or Drag Image Here</p>
                            <input type="file" id="fileInput" accept="image/png, image/jpeg, image/webp" hidden
                                onchange="handleImageUpload(this)">
                        </div>
                        <div class="tool-group">
                            <div class="tool-title">Compression Settings</div>
                            <div class="slider-row"><span>Quality</span><span id="valQuality">80%</span></div>
                            <input type="range" class="glass-slider" min="0.1" max="1" step="0.05" value="0.8"
                                id="rngQuality" oninput="processImage()">
                            <div class="slider-row" style="margin-top:10px;"><span>Max Width</span><span
                                    id="valWidth">Original</span></div>
                            <input type="number" class="tool-input" id="numWidth"
                                placeholder="e.g. 1920 (Leave empty for original)" oninput="processImage()">
                            <div class="slider-row" style="margin-top:10px;"><span>Output Format</span></div>
                            <select id="selFormat" class="tool-input" onchange="processImage()">
                                <option value="image/webp">WebP (Best Compression)</option>
                                <option value="image/jpeg">JPEG</option>
                                <option value="image/png">PNG</option>
                            </select>
                        </div>
                    </div>

                    <div id="socialControls">
                        <div class="tool-group">
                            <div class="tool-title">Social Card Info</div>
                            <input type="text" id="ogTitle" class="tool-input" placeholder="Title (e.g. My New Video)"
                                value="How to become a UI Developer">
                            <textarea id="ogDesc" class="tool-input" placeholder="Description..."
                                style="height:60px;">Complete roadmap for 2025 including React and Tailwind CSS tips.</textarea>
                            <input type="text" id="ogImg" class="tool-input" placeholder="Image URL..."
                                value="https://images.unsplash.com/photo-1633356122544-f134324a6cee?w=800">
                            <input type="text" id="ogUrl" class="tool-input" placeholder="Website URL..."
                                value="https://youtube.com/officewalabanda">
                        </div>
                        <button class="btn btn-pri" onclick="generateSocialCard()"
                            style="width:100%; justify-content:center;">Preview & Generate</button>
                    </div>

                    <div id="shadowControls">
                        <div class="tool-group">
                            <div class="tool-title">Smooth Shadow Settings</div>
                            <div class="slider-row"><span>Intensity</span><span id="valIntensity">0.5</span></div>
                            <input type="range" class="glass-slider" min="0" max="1" step="0.01" value="0.5"
                                id="rngIntensity" oninput="updateShadow()">
                            <div class="slider-row" style="margin-top:10px;"><span>Vertical Distance</span><span
                                    id="valY">100px</span></div>
                            <input type="range" class="glass-slider" min="0" max="200" value="100" id="rngY"
                                oninput="updateShadow()">
                            <div class="slider-row" style="margin-top:10px;"><span>Blur Strength</span><span
                                    id="valBlur">80px</span></div>
                            <input type="range" class="glass-slider" min="0" max="200" value="80" id="rngBlur"
                                oninput="updateShadow()">
                        </div>
                        <p style="font-size:0.75rem; color:var(--text-muted)">Generates 6-layer CSS shadows for
                            ultra-smooth depth.</p>
                    </div>

                    <div class="editor-stats" id="inputStats">0 chars | 0 KB</div>
                </div>
            </div>

            <div class="pane">
                <div class="pane-header">
                    <span class="pane-title" id="paneOutputTitle">Output</span>
                    <div class="pane-actions">
                        <div id="viewToggles"
                            style="display:none; gap:10px; margin-right:10px; font-size:0.8rem; align-items:center;">
                            <span style="cursor:pointer; opacity:0.6" onclick="switchView('code')"
                                id="toggleCode">Code</span><span
                                style="width:1px; height:12px; background:var(--border)"></span><span
                                style="cursor:pointer; font-weight:bold; color:var(--primary)"
                                onclick="switchView('visual')" id="toggleVisual">Visual</span>
                        </div>
                        <i class="fas fa-expand action-icon" onclick="toggleFullscreen()" title="Fullscreen"></i><i
                            class="far fa-copy action-icon" onclick="copyOutput()" title="Copy Result"></i><i
                            class="fas fa-download action-icon" onclick="downloadOutput()" title="Download"></i>
                    </div>
                </div>
                <div class="editor-container">
                    <textarea id="output" readonly placeholder="Result will appear here..."></textarea>
                    <div id="visualOutput"></div>
                    <div id="imagePreview">
                        <div class="img-preview-container">
                            <div class="img-card">
                                <div class="tool-title">Original</div>
                                <i id="iconOriginal" class="fas fa-image img-placeholder-icon"></i>
                                <img id="imgOriginal" src="" alt="Original">
                                <div class="img-meta" id="metaOriginal">Waiting for image...</div>
                            </div>
                            <div style="font-size:1.5rem; color:var(--text-muted);"><i class="fas fa-arrow-down"></i>
                            </div>
                            <div class="img-card" style="border-color:var(--primary);">
                                <div class="tool-title" style="color:var(--primary)">Compressed / Converted</div>
                                <i id="iconCompressed" class="fas fa-bolt img-placeholder-icon"
                                    style="color:var(--primary)"></i>
                                <img id="imgCompressed" src="" alt="Compressed">
                                <div class="img-meta">
                                    <span id="metaCompressed">-</span>
                                    <span id="badgeSaved" class="badge-save">0% Saved</span>
                                </div>
                            </div>
                            <button class="btn btn-pri" onclick="downloadImage()"
                                style="margin:0 auto; width: fit-content;">
                                <i class="fas fa-download"></i> Download Image
                            </button>
                        </div>
                    </div>
                    <iframe id="iframePreview" sandbox="allow-scripts"></iframe>
                    <div class="editor-stats" id="outputStats" style="display:none;">0 KB</div>
                </div>
            </div>
        </section>

        <footer class="footer">
            <div class="footer-stats">
                <div class="stat-item" id="footerStatus"><i class="fas fa-circle-notch"></i> Ready</div>
                <div class="stat-item" id="savingsStat" style="display:none;"><i class="fas fa-arrow-down"></i> <span
                        id="savingsText"></span> <span class="diff-tag" id="savingsBadge"></span></div>
                <div class="footer-links">
                    <a href="About.html">About</a> •
                    <a href="Privacy.html">Privacy</a> •
                    <a href="Contact.html">Contact</a>
                </div>
            </div>
            <div class="footer-actions"><button class="btn btn-sec" id="btnSecondary"
                    onclick="runAction('secondary')">MINIFY</button><button class="btn btn-pri" id="btnPrimary"
                    onclick="runAction('primary')"><i class="fas fa-play"></i> RUN</button></div>
        </footer>
    </main>

    <button id="pulseBtn" onclick="toggleSeoDrawer()" title="Learn More">
        <i class="fas fa-book-open"></i>
    </button>

    <aside id="seoDrawer">
        <div class="drawer-handle-area" onclick="toggleSeoDrawer()">
            <div class="drawer-handle"></div>
            <div class="drawer-close" onclick="toggleSeoDrawer()">&times;</div>
        </div>
        <div class="drawer-content">
            <article class="seo-article">
                <h1 class="seo-h1">Best Online <span>JSON Formatter</span>, Image Compressor & Developer Tools</h1>

                <p class="seo-intro">
                    Code Formats is the ultimate, privacy-first developer workspace. Validate, beautify, and minify your
                    code instantly. Compress images without server uploads. Every tool runs 100% in your browser for
                    maximum speed and security.
                </p>

                <div class="features-grid">
                    <div class="feature-box">
                        <h3><i class="fas fa-code"></i> JSON Formatter & Validator</h3>
                        <p>The best free online JSON tool. Prettify messy JSON, fix syntax errors, and minify for
                            production. Use our interactive tree view to debug complex API responses.</p>
                    </div>
                    <div class="feature-box">
                        <h3><i class="fas fa-image"></i> Lossless Image Compressor</h3>
                        <p>Reduce file size of PNG, JPG, and WebP images by up to 90% without quality loss. Convert
                            images to modern WebP format instantly in your browser.</p>
                    </div>
                    <div class="feature-box">
                        <h3><i class="fas fa-database"></i> SQL & Code Beautifiers</h3>
                        <p>Format SQL queries, XML data, CSS, and HTML. Our intelligent beautifiers fix indentation and
                            make your code readable and clean.</p>
                    </div>
                    <div class="feature-box">
                        <h3><i class="fas fa-lock"></i> 100% Client-Side Privacy</h3>
                        <p>Your data never leaves your device. Unlike other tools, we process everything locally using
                            JavaScript. Safe for sensitive data like JWTs and API keys.</p>
                    </div>
                </div>

                <h2 class="seo-h2">Frequently Asked Questions (FAQ)</h2>

                <details class="faq-item">
                    <summary>How to format JSON online? <i class="fas fa-chevron-down"></i></summary>
                    <div class="faq-content">Simply paste your JSON string into the input editor and click "RUN". Our
                        tool will automatically validate syntax and beautify the output with proper indentation.</div>
                </details>

                <details class="faq-item">
                    <summary>Is this Image Compressor safe? <i class="fas fa-chevron-down"></i></summary>
                    <div class="faq-content">Yes, it is 100% safe. We use advanced HTML5 Canvas technology to compress
                        images locally in your browser. Your photos are never uploaded to any server.</div>
                </details>

                <details class="faq-item">
                    <summary>Can I convert JPG to WebP? <i class="fas fa-chevron-down"></i></summary>
                    <div class="faq-content">Absolutely. Select the "Image Tools" category, upload your JPG or PNG, and
                        choose "WebP" as the output format. WebP offers superior compression for faster websites.</div>
                </details>

                <details class="faq-item">
                    <summary>What utilities are included? <i class="fas fa-chevron-down"></i></summary>
                    <div class="faq-content">
                        Code Formats includes a wide range of free tools:
                        <div class="tag-cloud">
                            <span class="tag">JSON Minifier</span>
                            <span class="tag">SQL Beautifier</span>
                            <span class="tag">Diff Checker</span>
                            <span class="tag">Base64 Encoder</span>
                            <span class="tag">URL Decoder</span>
                            <span class="tag">CSS Minifier</span>
                            <span class="tag">Mock Data Gen</span>
                            <span class="tag">QR Code Generator</span>
                        </div>
                    </div>
                </details>

                <h2 class="seo-h2">Why Developers Choose Code Formats?</h2>
                <div style="color:var(--text-muted); line-height:1.8;">
                    <ul style="margin-left: 20px;">
                        <li><strong>Speed:</strong> Instant processing with no server lag.</li>
                        <li><strong>Offline Mode:</strong> Works even without an internet connection once loaded.</li>
                        <li><strong>All-in-One:</strong> Switch between formatting JSON, minifying CSS, and generating
                            UUIDs in one tab.</li>
                        <li><strong>User Experience:</strong> Dark mode support, copy-paste shortcuts, and a clean,
                            ad-free interface.</li>
                    </ul>
                </div>

                <p
                    style="margin-top:50px; text-align:center; font-size:0.8rem; color:var(--text-muted); padding-bottom: 20px;">
                    © 2025 Code Formats. Built for the developer community.
                </p>
            </article>
        </div>
    </aside>

    <div class="toast" id="toast"><i class="fas fa-check-circle"></i> <span>Action Completed</span></div>

    <script>
        // --- 1. INITIALIZATION & STATE ---
        const tools = [
            { category: "JSON Tools", items: [{ id: "json-fmt", icon: "fas fa-code", name: "JSON Formatter", desc: "Validate, Prettify & Tree View" }, { id: "json-min", icon: "fas fa-compress", name: "JSON Minifier", desc: "Compress JSON data" }, { id: "json-csv", icon: "fas fa-table", name: "JSON to CSV", desc: "Convert JSON array to CSV" }, { id: "mock-data", icon: "fas fa-users", name: "Mock Data Gen", desc: "Fake Users JSON" }] },
            { category: "Image Tools", items: [{ id: "img-compress", icon: "fas fa-image", name: "Image Minifier & Converter", desc: "Compress & Convert (WebP, JPG, PNG)" }] },
            { category: "Design / UI", items: [{ id: "shadow-gen", icon: "fas fa-layer-group", name: "Smooth Shadow", desc: "Layered Shadows" }, { id: "glass-morphism", icon: "fas fa-wind", name: "Glassmorphism Gen", desc: "Generate Glass CSS" }, { id: "color-conv", icon: "fas fa-palette", name: "Color Converter", desc: "HEX, RGB, HSL conversion" }, { id: "aspect-ratio", icon: "fas fa-expand", name: "Aspect Ratio", desc: "Calc Ratio & Padding" }] },
            { category: "Media / Creator", items: [{ id: "social-card", icon: "fas fa-share-alt", name: "Social Preview", desc: "Twitter/Link Cards" }] },
            { category: "Dev Tools", items: [{ id: "diff-check", icon: "fas fa-exchange-alt", name: "Diff Checker", desc: "Compare Text/Code" }, { id: "jwt-dec", icon: "fas fa-shield-alt", name: "JWT Decoder", desc: "Decode Header & Payload" }, { id: "px-rem", icon: "fas fa-ruler-combined", name: "PX to REM", desc: "Convert Pixels to REM units" }, { id: "case-conv", icon: "fas fa-text-height", name: "Case Converter", desc: "Camel, Snake, Kebab formats" }] },
            { category: "HTML / XML", items: [{ id: "html-fmt", icon: "fab fa-html5", name: "HTML Formatter", desc: "Beautify HTML code" }, { id: "html-min", icon: "fas fa-compress-arrows-alt", name: "HTML Minifier", desc: "Compress HTML code" }, { id: "html-view", icon: "fas fa-eye", name: "HTML Viewer", desc: "Preview HTML output" }, { id: "xml-fmt", icon: "fas fa-code", name: "XML Formatter", desc: "Beautify XML" }] },
            { category: "JS / CSS", items: [{ id: "js-fmt", icon: "fab fa-js", name: "JS Formatter", desc: "Beautify JavaScript" }, { id: "js-min", icon: "fas fa-file-archive", name: "JS Minifier", desc: "Minify & Obfuscate JS" }, { id: "css-fmt", icon: "fab fa-css3-alt", name: "CSS Formatter", desc: "Beautify CSS Code" }, { id: "css-min", icon: "fas fa-compress-arrows-alt", name: "CSS Minifier", desc: "Compress CSS files" }] },
            { category: "Converters", items: [{ id: "excel-html", icon: "fas fa-table", name: "Excel to HTML", desc: "Convert Spreadsheet to HTML" }, { id: "csv-json", icon: "fas fa-file-csv", name: "CSV to JSON", desc: "Convert CSV to JSON" }, { id: "sql-fmt", icon: "fas fa-database", name: "SQL Formatter", desc: "Format SQL Queries" }] },
            { category: "Utils", items: [{ id: "base64", icon: "fas fa-lock", name: "Base64 Tool", desc: "Encode or Decode Base64" }, { id: "url-enc", icon: "fas fa-link", name: "URL Encoder", desc: "Encode URL parameters" }, { id: "qr-gen", icon: "fas fa-qrcode", name: "QR Generator", desc: "Generate QR Codes" }, { id: "hash-gen", icon: "fas fa-fingerprint", name: "Hash Generator", desc: "MD5, SHA1, SHA256" }, { id: "lorem", icon: "fas fa-paragraph", name: "Lorem Ipsum", desc: "Generate Dummy Text" }] }
        ];

        let currentId = "json-fmt"; let isRemToPxMode = false; let debounceTimer; const DIFF_SPLIT = "\n======\n";
        let originalImageBlob = null; let compressedImageUrl = null;

        const els = {
            input: document.getElementById('input'), output: document.getElementById('output'), menu: document.getElementById('menuContainer'),
            title: document.getElementById('toolTitle'), desc: document.getElementById('toolDesc'), visual: document.getElementById('visualOutput'),
            frame: document.getElementById('iframePreview'), inputStats: document.getElementById('inputStats'), outputStats: document.getElementById('outputStats'),
            savingsStat: document.getElementById('savingsStat'), btnPri: document.getElementById('btnPrimary'), btnSec: document.getElementById('btnSecondary'),
            viewToggles: document.getElementById('viewToggles'), sidebar: document.getElementById('sidebar'), overlay: document.getElementById('overlay'),
            inputActions: document.getElementById('inputActions'), paneInputTitle: document.getElementById('paneInputTitle'), paneOutputTitle: document.getElementById('paneOutputTitle'),
            // New Controls
            mockControls: document.getElementById('mockControls'), socialControls: document.getElementById('socialControls'),
            shadowControls: document.getElementById('shadowControls'), imageControls: document.getElementById('imageControls'), imagePreview: document.getElementById('imagePreview'),
            // SEO Drawer
            seoDrawer: document.getElementById('seoDrawer')
        };

        document.addEventListener('DOMContentLoaded', () => { loadTheme(); renderSidebar(); selectTool('json-fmt'); setupEventListeners(); startTypingAnimation(); });

        function startTypingAnimation() {
            const textToType = "Paste your code here...";
            const inputEl = document.getElementById('input');
            let index = 0; inputEl.placeholder = "";
            function type() { if (index < textToType.length) { inputEl.placeholder += textToType.charAt(index); index++; setTimeout(type, 50); } }
            setTimeout(type, 500); inputEl.addEventListener('focus', () => { inputEl.placeholder = "Paste your code here..."; });
        }

        function setupEventListeners() {
            els.input.addEventListener('input', () => {
                updateStats(els.input.value, 'input');
                document.getElementById('footerStatus').innerHTML = '<i class="fas fa-keyboard"></i> Typing...';
                clearTimeout(debounceTimer);
                if (['color-conv', 'aspect-ratio'].includes(currentId)) debounceTimer = setTimeout(() => runAction('primary'), 300);
            });
            document.addEventListener('keydown', e => { if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') runAction('primary'); });
            els.input.addEventListener('keydown', function (e) {
                if (e.key == 'Tab') { e.preventDefault(); const start = this.selectionStart; const end = this.selectionEnd; this.value = this.value.substring(0, start) + "\t" + this.value.substring(end); this.selectionStart = this.selectionEnd = start + 1; }
            });
            window.addEventListener('resize', () => { if (window.innerWidth > 900) { els.overlay.classList.remove('show'); els.sidebar.classList.remove('open'); els.seoDrawer.classList.remove('open'); } });

            // Drag and Drop for Images
            const dz = document.getElementById('dropZone');
            dz.addEventListener('dragover', e => { e.preventDefault(); dz.classList.add('dragover'); });
            dz.addEventListener('dragleave', e => { e.preventDefault(); dz.classList.remove('dragover'); });
            dz.addEventListener('drop', e => {
                e.preventDefault(); dz.classList.remove('dragover');
                if (e.dataTransfer.files.length) { document.getElementById('fileInput').files = e.dataTransfer.files; handleImageUpload(document.getElementById('fileInput')); }
            });
        }

        function loadTheme() { const saved = localStorage.getItem('theme') || 'dark'; document.documentElement.className = saved; updateThemeIcon(saved); }
        function toggleTheme() { const current = document.documentElement.className; const newTheme = current === 'dark' ? 'light' : 'dark'; document.documentElement.className = newTheme; localStorage.setItem('theme', newTheme); updateThemeIcon(newTheme); }
        function updateThemeIcon(theme) { document.getElementById('themeIcon').className = theme === 'light' ? 'fas fa-sun' : 'fas fa-moon'; }
        function renderSidebar() { els.menu.innerHTML = tools.map((group, idx) => `<div class="nav-group"><div class="nav-group-title">${group.category}</div>${group.items.map(item => `<div class="nav-item ${idx === 0 && item.id === 'json-fmt' ? 'active' : ''}" onclick="selectTool('${item.id}')" data-id="${item.id}"><i class="${item.icon}"></i> ${item.name}</div>`).join('')}</div>`).join(''); }

        function selectTool(id) {
            currentId = id; document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            document.querySelector(`.nav-item[data-id="${id}"]`)?.classList.add('active');
            let tool; tools.forEach(g => { const t = g.items.find(i => i.id === id); if (t) tool = t; });
            els.title.innerText = tool.name; els.desc.innerText = tool.desc;

            // Reset UI
            [els.mockControls, els.socialControls, els.shadowControls, els.imageControls, els.imagePreview].forEach(el => el.style.display = 'none');
            els.input.style.display = 'block'; els.visual.style.display = 'none'; els.frame.style.display = 'none'; els.output.style.display = 'block';
            els.btnPri.style.display = 'flex'; els.btnSec.style.display = 'none'; els.inputActions.style.display = 'flex';
            els.viewToggles.style.display = (['json-fmt', 'html-view', 'excel-html', 'jwt-dec', 'glass-morphism', 'social-card'].includes(id)) ? 'flex' : 'none';
            els.outputStats.style.display = 'none'; els.savingsStat.style.display = 'none';
            updateStats("", 'input');
            els.btnSec.style.display = 'flex'; els.btnSec.innerText = 'MINIFY'; els.btnPri.innerHTML = '<i class="fas fa-play"></i> RUN / FORMAT';
            els.input.placeholder = "Paste your code here..."; els.input.disabled = false;
            els.paneInputTitle.innerText = "Input / Controls"; els.paneOutputTitle.innerText = "Output";

            // Logic Switches
            if (['qr-gen', 'lorem', 'hash-gen', 'base64', 'url-enc', 'csv-json', 'case-conv', 'jwt-dec', 'color-conv', 'glass-morphism', 'aspect-ratio', 'mock-data', 'social-card', 'shadow-gen', 'img-compress'].includes(id)) els.btnSec.style.display = 'none';

            if (id === 'mock-data') { els.input.style.display = 'none'; els.mockControls.style.display = 'block'; els.btnPri.style.display = 'none'; }
            else if (id === 'social-card') { els.input.style.display = 'none'; els.socialControls.style.display = 'block'; els.btnPri.style.display = 'none'; }
            else if (id === 'shadow-gen') { els.input.style.display = 'none'; els.shadowControls.style.display = 'block'; els.btnPri.style.display = 'none'; updateShadow(); }

            // Image Tool Setup
            else if (id === 'img-compress') {
                els.input.style.display = 'none'; els.output.style.display = 'none';
                els.imageControls.style.display = 'block'; els.imagePreview.style.display = 'block';
                els.btnPri.style.display = 'none'; els.inputActions.style.display = 'none';
                els.paneInputTitle.innerText = "Upload & Settings"; els.paneOutputTitle.innerText = "Preview & Download";

                // Reset Image Preview UI on Tool Switch
                document.getElementById('imgOriginal').style.display = 'none';
                document.getElementById('iconOriginal').style.display = 'block';
                document.getElementById('metaOriginal').innerText = "Waiting for image...";
                document.getElementById('imgCompressed').style.display = 'none';
                document.getElementById('iconCompressed').style.display = 'block';
                document.getElementById('metaCompressed').innerText = "-";
                document.getElementById('badgeSaved').innerText = "0% Saved";
                document.getElementById('badgeSaved').style.background = 'var(--text-muted)';
            }

            else if (id === 'glass-morphism') { els.input.disabled = true; els.input.placeholder = "Use Visual Pane"; renderGlassGenerator(); switchView('visual'); }
            else if (id === 'aspect-ratio') { els.input.placeholder = "Enter Width Height (e.g. 1920 1080)"; }
            else if (id === 'px-rem') { isRemToPxMode = false; els.btnSec.style.display = 'flex'; els.btnSec.innerHTML = '<i class="fas fa-exchange-alt"></i> SWAP ⇄'; els.btnPri.innerHTML = '<i class="fas fa-calculator"></i> CONVERT'; els.input.placeholder = "Enter PX values (e.g. 16 24 32)..."; }
            else if (id === 'diff-check') { els.btnSec.style.display = 'flex'; els.btnSec.innerHTML = '<i class="fas fa-columns"></i> INSERT SPLIT'; els.btnPri.innerHTML = '<i class="fas fa-search"></i> COMPARE'; els.input.placeholder = "Step 1: Paste Original Text\nStep 2: Click 'INSERT SPLIT' button below\nStep 3: Paste New Text after the line"; }
            else if (id === 'html-view') { els.input.placeholder = ""; els.btnSec.style.display = 'none'; els.btnPri.innerHTML = '<i class="fas fa-eye"></i> PREVIEW'; }
            else if (id === 'excel-html') { els.btnSec.style.display = 'none'; els.btnPri.innerHTML = '<i class="fas fa-code"></i> CONVERT'; }

            if (window.innerWidth <= 900) toggleMobileSidebar();
        }

        // --- IMAGE TOOLS LOGIC ---
        function handleImageUpload(input) {
            const file = input.files[0];
            if (!file) return;
            originalImageBlob = file;
            const reader = new FileReader();
            reader.onload = (e) => {
                const img = document.getElementById('imgOriginal');
                img.src = e.target.result;
                img.style.display = 'block'; // Show Image
                document.getElementById('iconOriginal').style.display = 'none'; // Hide Icon
                document.getElementById('metaOriginal').innerText = `${file.type} | ${(file.size / 1024).toFixed(1)} KB`;
                processImage();
            };
            reader.readAsDataURL(file);
        }

        function processImage() {
            if (!originalImageBlob) return;
            const quality = parseFloat(document.getElementById('rngQuality').value);
            document.getElementById('valQuality').innerText = Math.round(quality * 100) + '%';

            const format = document.getElementById('selFormat').value;
            const maxWidth = document.getElementById('numWidth').value ? parseInt(document.getElementById('numWidth').value) : 0;

            const img = new Image();
            img.src = document.getElementById('imgOriginal').src;
            img.onload = () => {
                const canvas = document.createElement('canvas');
                let w = img.width; let h = img.height;

                if (maxWidth > 0 && w > maxWidth) {
                    const ratio = maxWidth / w;
                    w = maxWidth; h = h * ratio;
                }

                canvas.width = w; canvas.height = h;
                const ctx = canvas.getContext('2d');
                ctx.drawImage(img, 0, 0, w, h);

                compressedImageUrl = canvas.toDataURL(format, quality);

                const imgComp = document.getElementById('imgCompressed');
                imgComp.src = compressedImageUrl;
                imgComp.style.display = 'block'; // Show Image
                document.getElementById('iconCompressed').style.display = 'none'; // Hide Icon

                // Calculate size approx (Base64 length * 0.75)
                const head = `data:${format};base64,`;
                const sizeInBytes = Math.round((compressedImageUrl.length - head.length) * 0.75);
                const sizeKB = (sizeInBytes / 1024).toFixed(1);
                const originalKB = (originalImageBlob.size / 1024).toFixed(1);

                const saved = ((1 - (sizeInBytes / originalImageBlob.size)) * 100).toFixed(0);

                document.getElementById('metaCompressed').innerText = `${format.split('/')[1].toUpperCase()} | ${sizeKB} KB`;
                const badge = document.getElementById('badgeSaved');
                badge.innerText = `${saved > 0 ? saved : 0}% Saved`;
                badge.style.background = saved > 0 ? 'var(--diff-add)' : 'var(--text-muted)';
            };
        }

        function downloadImage() {
            if (!compressedImageUrl) return;
            const a = document.createElement('a');
            const ext = document.getElementById('selFormat').value.split('/')[1];
            a.href = compressedImageUrl;
            a.download = `minified_image.${ext}`;
            a.click();
            showToast("Image Downloaded");
        }

        // --- EXISTING FEATURES LOGIC ---
        function generateMockData() {
            const rows = parseInt(document.getElementById('mockRows').value);
            const data = []; const names = ["Alice", "Bob", "Charlie", "Dave", "Eve"]; const roles = ["Admin", "User", "Editor"];
            for (let i = 0; i < rows; i++) {
                const item = {};
                if (document.getElementById('mockId').checked) item.id = i + 1;
                if (document.getElementById('mockName').checked) item.name = names[Math.floor(Math.random() * names.length)] + ` ${i}`;
                if (document.getElementById('mockEmail').checked) item.email = `user${i}@example.com`;
                if (document.getElementById('mockRole').checked) item.role = roles[Math.floor(Math.random() * roles.length)];
                if (document.getElementById('mockAvatar').checked) item.avatar = `https://i.pravatar.cc/150?u=${i}`;
                data.push(item);
            }
            els.output.value = JSON.stringify(data, null, 2);
            updateStats(els.output.value, 'output');
        }

        function generateSocialCard() {
            const title = document.getElementById('ogTitle').value;
            const desc = document.getElementById('ogDesc').value;
            const img = document.getElementById('ogImg').value;
            const url = document.getElementById('ogUrl').value;

            els.visual.innerHTML = `<div style="max-width:400px; margin:20px auto; border:1px solid #e1e8ed; border-radius:12px; overflow:hidden; background:#fff; font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;"><div style="height:200px; background:url('${img}') center/cover; background-color:#cfd9de;"></div><div style="padding:12px; border-top:1px solid #e1e8ed;"><h3 style="margin:0 0 4px; color:#0f1419; font-size:15px; font-weight:700; line-height:20px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;">${title}</h3><p style="margin:0; color:#536471; font-size:14px; line-height:18px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;">${desc}</p><div style="margin-top:4px; color:#536471; font-size:14px;">${new URL(url).hostname}</div></div></div><p style="text-align:center; margin-top:10px; font-size:0.8rem; color:var(--text-muted);">Twitter Card Preview</p>`;

            els.output.value = `\n<meta property="og:type" content="website">\n<meta property="og:url" content="${url}">\n<meta property="og:title" content="${title}">\n<meta property="og:description" content="${desc}">\n<meta property="og:image" content="${img}">\n\n\n<meta property="twitter:card" content="summary_large_image">\n<meta property="twitter:url" content="${url}">\n<meta property="twitter:title" content="${title}">\n<meta property="twitter:description" content="${desc}">\n<meta property="twitter:image" content="${img}">`;

            els.visual.style.display = 'block'; els.output.style.display = 'block'; switchView('visual');
        }

        function updateShadow() {
            const intensity = parseFloat(document.getElementById('rngIntensity').value);
            const yDist = parseInt(document.getElementById('rngY').value);
            const blur = parseInt(document.getElementById('rngBlur').value);
            document.getElementById('valIntensity').innerText = intensity; document.getElementById('valY').innerText = yDist + 'px'; document.getElementById('valBlur').innerText = blur + 'px';

            const layers = [];
            for (let i = 1; i <= 6; i++) {
                const curY = Math.round((yDist / 6) * i);
                const curBlur = Math.round((blur / 6) * i);
                const opacity = (intensity / i).toFixed(3);
                layers.push(`0 ${curY}px ${curBlur}px rgba(0, 0, 0, ${opacity})`);
            }
            const css = `box-shadow:\n  ${layers.join(',\n  ')};`;
            els.output.value = css;
            els.visual.innerHTML = `<div style="height:100%; display:flex; align-items:center; justify-content:center;"><div style="width:200px; height:200px; background:#fff; border-radius:16px; ${css.replace(/\n/g, ' ')} display:flex; align-items:center; justify-content:center; color:#333; font-weight:bold;">Smooth Shadow</div></div>`;
            els.visual.style.display = 'block'; els.output.style.display = 'block';
        }

        function renderGlassGenerator() {
            els.visual.innerHTML = `<div style="height:100%; display:flex; flex-direction:column; gap:20px;"><div id="glassPreviewBg" style="flex:1; background: linear-gradient(45deg, #ff9a9e 0%, #fad0c4 99%, #fad0c4 100%); border-radius:8px; display:flex; justify-content:center; align-items:center;"><div id="glassCard" style="width:200px; height:120px; color:#fff; display:flex; justify-content:center; align-items:center; border:1px solid rgba(255,255,255,0.3); border-radius:12px;">Glass Card</div></div><div class="glass-controls"><div class="glass-control-group"><label>Blur: <span id="valBlur">10px</span></label><input type="range" class="glass-slider" min="0" max="40" value="10" oninput="updateGlass()" id="rngBlur"></div><div class="glass-control-group"><label>Transparency: <span id="valTrans">0.2</span></label><input type="range" class="glass-slider" min="0" max="1" step="0.05" value="0.2" oninput="updateGlass()" id="rngTrans"></div><div class="glass-control-group"><label>Color (White -> Black)</label><input type="range" class="glass-slider" min="0" max="255" value="255" oninput="updateGlass()" id="rngColor"></div></div><pre id="glassCode" style="background:var(--bg-input); padding:10px; border-radius:6px; font-size:12px; height:auto; overflow:auto;"></pre></div>`;
            els.visual.style.display = 'block'; updateGlass();
        }
        function updateGlass() {
            const blur = document.getElementById('rngBlur').value; const trans = document.getElementById('rngTrans').value; const colVal = document.getElementById('rngColor').value;
            document.getElementById('valBlur').innerText = blur + "px"; document.getElementById('valTrans').innerText = trans;
            const bgCol = `rgba(${colVal}, ${colVal}, ${colVal}, ${trans})`; const card = document.getElementById('glassCard');
            card.style.background = bgCol; card.style.backdropFilter = `blur(${blur}px)`; card.style.webkitBackdropFilter = `blur(${blur}px)`;
            document.getElementById('glassCode').innerText = `.glass {\n    background: ${bgCol};\n    backdrop-filter: blur(${blur}px);\n    -webkit-backdrop-filter: blur(${blur}px);\n    border: 1px solid rgba(255, 255, 255, 0.3);\n}`;
        }

        async function runAction(mode) {
            const val = els.input.value; const getPlugins = () => window.prettierPlugins || {};

            if (currentId === 'px-rem' && mode === 'secondary') { isRemToPxMode = !isRemToPxMode; els.input.placeholder = isRemToPxMode ? "Enter REM values..." : "Enter PX values..."; showToast(`Switched mode: ${isRemToPxMode ? "REM → PX" : "PX → REM"}`); return; }
            if (currentId === 'diff-check' && mode === 'secondary') { const currentPos = els.input.selectionStart || els.input.value.length; els.input.value = els.input.value.slice(0, currentPos) + DIFF_SPLIT + els.input.value.slice(currentPos); showToast("Splitter Inserted"); return; }

            if (!val && !['lorem', 'glass-morphism', 'mock-data'].includes(currentId)) return;
            const btn = (mode === 'primary') ? els.btnPri : els.btnSec; const originalText = btn.innerHTML;
            if (mode === 'primary') btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
            await new Promise(r => setTimeout(r, 50));

            try {
                let res = "";
                if (currentId === 'glass-morphism') { const code = document.getElementById('glassCode').innerText; navigator.clipboard.writeText(code); showToast("CSS Copied to Clipboard!"); btn.innerHTML = originalText; return; }
                else if (currentId === 'aspect-ratio') {
                    const nums = val.match(/\d+/g); if (!nums || nums.length < 2) throw new Error("Enter Width and Height (e.g. 1920 1080)");
                    const w = parseInt(nums[0]), h = parseInt(nums[1]); const pad = ((h / w) * 100).toFixed(2);
                    res = `Aspect Ratio: ${w}:${h}\nPadding-Bottom: ${pad}%\n\nCSS:\n.aspect-box {\n  width: 100%;\n  padding-bottom: ${pad}%;\n  position: relative;\n}`;
                    els.visual.innerHTML = `<div style="width:100%; height:100%; display:flex; align-items:center; justify-content:center; flex-direction:column;"><div style="width:200px; height:${(200 * (h / w))}px; background:var(--primary); display:flex; align-items:center; justify-content:center; color:#fff; font-weight:bold; border-radius:4px;">${w}:${h}</div><p style="margin-top:10px; color:var(--text-muted);">Preview Shape</p></div>`;
                    els.visual.style.display = 'block'; els.visual.style.height = 'auto'; els.output.style.display = 'block';
                }
                else if (currentId === 'color-conv') {
                    let color = val.trim(); let r, g, b, a = 1;
                    const cToHex = c => { const hex = c.toString(16); return hex.length == 1 ? "0" + hex : hex; };
                    if (color.startsWith('#')) { const hex = color.replace('#', ''); if (hex.length === 3) { r = parseInt(hex[0] + hex[0], 16); g = parseInt(hex[1] + hex[1], 16); b = parseInt(hex[2] + hex[2], 16); } else { r = parseInt(hex.substring(0, 2), 16); g = parseInt(hex.substring(2, 4), 16); b = parseInt(hex.substring(4, 6), 16); if (hex.length === 8) a = (parseInt(hex.substring(6, 8), 16) / 255).toFixed(2); } }
                    else if (color.toLowerCase().startsWith('rgb')) { const p = color.match(/[\d.]+/g); r = parseInt(p[0]); g = parseInt(p[1]); b = parseInt(p[2]); if (p[3]) a = parseFloat(p[3]); }
                    else if (color.toLowerCase().startsWith('hsl')) { throw new Error("HSL not supported in quick mode"); }
                    else throw new Error("Invalid Color");
                    const hexVal = "#" + cToHex(r) + cToHex(g) + cToHex(b); const rgbVal = `rgb(${r}, ${g}, ${b})`; const rgbaVal = `rgba(${r}, ${g}, ${b}, ${a})`;
                    res = `HEX:   ${hexVal}\nRGB:   ${rgbVal}\nRGBA:  ${rgbaVal}`;
                    els.visual.innerHTML = `<div style="width:100%; height:80px; background:${rgbaVal}; border-radius:8px; border:2px solid var(--border); display:flex; align-items:center; justify-content:center; color:#fff; font-weight:bold;">Text Contrast Test</div>`;
                    els.visual.style.display = 'block'; els.visual.style.height = 'auto'; els.visual.style.position = 'relative'; els.visual.style.padding = '0 0 15px 0'; els.visual.style.background = 'transparent'; els.output.style.display = 'block';
                }
                else if (currentId === 'json-fmt') { const obj = JSON.parse(val); res = JSON.stringify(obj, null, 4); els.visual.innerHTML = syntaxHighlight(res); els.visual.style.display = 'block'; els.visual.style.height = '100%'; els.output.style.display = 'none'; switchView('visual'); }
                else if (currentId === 'json-min') res = JSON.stringify(JSON.parse(val));
                else if (currentId === 'diff-check') {
                    if (!val.includes("======")) throw new Error("Use 'INSERT SPLIT' button");
                    const parts = val.split("======"); const diff = Diff.diffLines(parts[0].trim(), parts[1].trim());
                    let f = document.createDocumentFragment();
                    diff.forEach((p) => { if (p.added || p.removed) { const s = document.createElement('span'); s.className = p.added ? 'diff-added' : 'diff-removed'; s.appendChild(document.createTextNode((p.added ? '+ ' : '- ') + p.value)); f.appendChild(s); } else { const s = document.createElement('span'); s.style.opacity = "0.5"; s.appendChild(document.createTextNode('  ' + p.value)); f.appendChild(s); } });
                    els.visual.innerHTML = "<pre></pre>"; els.visual.firstChild.appendChild(f); els.visual.style.display = 'block'; els.output.style.display = 'none'; switchView('visual');
                }
                else if (currentId === 'jwt-dec') {
                    const parts = val.trim().split('.'); if (parts.length !== 3) throw new Error("Invalid Token");
                    const decode = (s) => JSON.parse(decodeURIComponent(atob(s.replace(/-/g, '+').replace(/_/g, '/')).split('').map(c => '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2)).join('')));
                    res = JSON.stringify({ HEADER: decode(parts[0]), PAYLOAD: decode(parts[1]) }, null, 4);
                    els.visual.innerHTML = syntaxHighlight(res); els.visual.style.display = 'block'; els.visual.style.height = '100%'; els.output.style.display = 'none'; switchView('visual');
                }
                else if (currentId === 'px-rem') { const baseSize = 16; const nums = val.match(/[0-9.]+/g); if (!nums) res = "Please enter numbers."; else { const results = nums.map(num => isRemToPxMode ? `${num}rem = ${parseFloat(num) * baseSize}px` : `${num}px = ${parseFloat((parseFloat(num) / baseSize).toFixed(4))}rem`); res = `Mode: ${isRemToPxMode ? 'REM → PX' : 'PX → REM'} (Base: 16px)\n--------------------------\n` + results.join('\n'); } }
                else if (currentId === 'case-conv') { const t = val.trim(); const toCamel = s => s.toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g, (m, c) => c.toUpperCase()); const toSnake = s => s.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map(x => x.toLowerCase()).join('_'); res = `Original: ${t}\nCamel: ${toCamel(t)}\nSnake: ${toSnake(t)}`; }
                else if (currentId === 'html-fmt') res = await prettier.format(val, { parser: "html", plugins: getPlugins() });
                else if (currentId === 'html-min') res = val.replace(/\n/g, "").replace(/[\t ]+\</g, "<").replace(/\>[\t ]+\</g, "><").replace(/\>[\t ]+$/g, ">");
                else if (currentId === 'html-view') { els.frame.style.display = 'block'; els.output.style.display = 'none'; els.frame.srcdoc = val; btn.innerHTML = originalText; showToast("Preview Loaded"); return; }
                else if (currentId === 'css-fmt') res = await prettier.format(val, { parser: "css", plugins: getPlugins() });
                else if (currentId === 'css-min') res = val.replace(/\/\*[\s\S]*?\*\//g, "").replace(/\n/g, "").replace(/\s+/g, " ").replace(/\s?([:;{}])\s?/g, "$1").replace(/;}/g, "}").trim();
                else if (currentId === 'js-fmt') res = await prettier.format(val, { parser: "babel", plugins: getPlugins() });
                else if (currentId === 'lorem') res = "Lorem ipsum dolor sit amet...";
                else if (currentId === 'sql-fmt') res = window.sqlFormatter.format(val);
                else if (currentId === 'csv-json') res = JSON.stringify(Papa.parse(val, { header: true }).data, null, 2);
                else if (currentId === 'excel-html') { res = excelToHtml(val); els.output.value = res; els.frame.srcdoc = res; }
                else if (currentId === 'base64') res = (mode === 'primary') ? btoa(val) : atob(val);
                else if (currentId === 'url-enc') res = (mode === 'primary') ? encodeURIComponent(val) : decodeURIComponent(val);
                else if (currentId === 'qr-gen') { els.visual.innerHTML = ""; els.visual.style.background = "#fff"; new QRCode(els.visual, { text: val, width: 200, height: 200 }); els.visual.style.display = 'flex'; els.visual.style.justifyContent = 'center'; els.visual.style.alignItems = 'center'; els.output.style.display = 'none'; btn.innerHTML = originalText; showToast("QR Generated!"); return; }
                else if (currentId === 'hash-gen') res = `MD5:    ${CryptoJS.MD5(val)}\nSHA1:   ${CryptoJS.SHA1(val)}\nSHA256: ${CryptoJS.SHA256(val)}`;

                els.output.value = res; updateStats(res, 'output');
                if (mode === 'primary' && val && res) showToast("Done!");
            } catch (e) { if (mode === 'primary') { console.error(e); showToast(e.message, true); els.output.value = "Error: " + e.message; } }
            btn.innerHTML = originalText;
        }

        // --- HELPERS ---
        function handleMenuClick() { if (window.innerWidth <= 900) { toggleMobileSidebar(); } else { toggleSidebarDesktop(); } }
        function toggleSidebarDesktop() { els.sidebar.classList.toggle('collapsed'); }
        function toggleMobileSidebar() { const isOpen = els.sidebar.classList.contains('open'); if (isOpen) { els.sidebar.classList.remove('open'); els.overlay.classList.remove('show'); } else { els.sidebar.classList.add('open'); els.overlay.classList.add('show'); } }
        function formatSize(bytes) { if (bytes === 0) return '0 B'; const k = 1024; const sizes = ['B', 'KB', 'MB']; const i = Math.floor(Math.log(bytes) / Math.log(k)); return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]; }
        function updateStats(text, target) { const label = `${text.length.toLocaleString()} chars | ${formatSize(new Blob([text]).size)}`; if (target === 'input') els.inputStats.innerText = label; if (target === 'output') { els.outputStats.innerText = label; els.outputStats.style.display = 'block'; } }
        function switchView(type) { if (type === 'visual') { els.frame.style.display = (currentId === 'html-view' || currentId === 'excel-html') ? 'block' : 'none'; if (currentId === 'json-fmt' || currentId === 'jwt-dec' || currentId === 'glass-morphism' || currentId === 'social-card') els.visual.style.display = 'block'; els.output.style.display = 'none'; document.getElementById('toggleVisual').style.color = 'var(--primary)'; document.getElementById('toggleCode').style.color = 'var(--text-muted)'; } else { els.visual.style.display = 'none'; els.frame.style.display = 'none'; els.output.style.display = 'block'; document.getElementById('toggleCode').style.color = 'var(--primary)'; document.getElementById('toggleVisual').style.color = 'var(--text-muted)'; } }
        function syntaxHighlight(json) { return '<pre>' + json.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g, match => { let cls = 'json-number'; if (/^"/.test(match)) { cls = /:$/.test(match) ? 'json-key' : 'json-string'; } else if (/true|false/.test(match)) cls = 'json-boolean'; else if (/null/.test(match)) cls = 'json-null'; return '<span class="' + cls + '">' + match + '</span>'; }) + '</pre>'; }
        function excelToHtml(d) { let t = '<style>table{border-collapse:collapse;width:100%;font-family:sans-serif;}th,td{border:1px solid #ddd;padding:8px;text-align:left;}th{background-color:#f2f2f2;color:#333}tr:nth-child(even){background-color:#f9f9f9}</style><table>'; d.trim().split('\n').forEach((r, i) => { t += '<tr>'; r.split('\t').forEach(c => t += i === 0 ? `<th>${c}</th>` : `<td>${c}</td>`); t += '</tr>'; }); return t + '</table>'; }
        function filterTools(el) { const term = el.value.toLowerCase(); document.querySelectorAll('.nav-item').forEach(item => { item.style.display = item.innerText.toLowerCase().includes(term) ? 'flex' : 'none'; }); }
        function copyOutput() { navigator.clipboard.writeText(els.output.value); showToast("Copied!"); }
        function pasteInput() { navigator.clipboard.readText().then(t => { els.input.value = t; updateStats(t, 'input'); }); }
        function clearAll() { els.input.value = ""; els.output.value = ""; els.visual.innerHTML = ""; els.inputStats.innerText = "0 chars | 0 KB"; }
        function downloadOutput() { const blob = new Blob([els.output.value], { type: "text/plain" }); const a = document.createElement("a"); a.href = URL.createObjectURL(blob); a.download = `code_export.txt`; a.click(); }
        function toggleFullscreen() { els.output.parentElement.parentElement.classList.toggle('fullscreen'); }
        function showToast(msg, isError = false) { const t = document.getElementById('toast'); t.innerHTML = `<i class="fas ${isError ? 'fa-exclamation-circle' : 'fa-check-circle'}"></i> <span>${msg}</span>`; t.className = isError ? "toast show error" : "toast show"; setTimeout(() => t.classList.remove('show'), 3000); }
    </script>
</body>

</html>